{
    "collab_server" : "",
    "contents" : "setwd(\"/Users/rjacobuc/Documents/GitHub/longRPart2_scripts\")\n\n\nECLSK_1000 = read.table(\"Subset1000_READING_PREDICTORS_AGE.dat\",\n                        na.strings = \".\")\n\n\ncolnames(ECLSK_1000) = c(\"CHILDID\",\n                         \"AGE\",\n                         \"OCCASION\",\n                         \"GENDER\",\n                         \"W1POVRTY\",\n                         \"RACE\",\n                         \"P1FIRKDG\",\n                         \"C1FMOTOR\",\n                         \"C1GMOTOR\",\n                         \"T1CONTRO\" ,\n                         \"T1INTERP\",\n                         \"T1EXTERN\" ,\n                         \"T1INTERN\",\n                         \"READING\")\n\n#GENDER 1 is MALE\n#RACE: 1 white non-hispanic, 2 black or af. am., 3 hispanic race specified, 4 hispanic race not specified\n\n#Clean data: delete NAs in AGE and READING, and make sure at least ONE predictor has a value.\nECLSK_1000$RACE = as.factor(ECLSK_1000$RACE)\n\nECLSK_1000_noNA = ECLSK_1000\n\nECLSK_1000_noNA$age_5 = ECLSK_1000_noNA$AGE-5\n\nECLSK_1000_noNA = ECLSK_1000_noNA[!is.na(ECLSK_1000_noNA$GENDER),]\nECLSK_1000_noNA = ECLSK_1000_noNA[!is.na(ECLSK_1000_noNA$W1POVRTY),]\nECLSK_1000_noNA = ECLSK_1000_noNA[!is.na(ECLSK_1000_noNA$C1GMOTOR),]\nECLSK_1000_noNA = ECLSK_1000_noNA[!is.na(ECLSK_1000_noNA$P1FIRKDG),]\nECLSK_1000_noNA = ECLSK_1000_noNA[!is.na(ECLSK_1000_noNA$C1FMOTOR),]\nECLSK_1000_noNA = ECLSK_1000_noNA[!is.na(ECLSK_1000_noNA$T1CONTRO),]\nECLSK_1000_noNA = ECLSK_1000_noNA[!is.na(ECLSK_1000_noNA$T1INTERP),]\nECLSK_1000_noNA = ECLSK_1000_noNA[!is.na(ECLSK_1000_noNA$T1EXTERN),]\nECLSK_1000_noNA = ECLSK_1000_noNA[!is.na(ECLSK_1000_noNA$T1INTERN),]\nECLSK_1000_noNA = ECLSK_1000_noNA[!is.na(ECLSK_1000_noNA$RACE),]\n\n#Split TRAINING vs TESTING\n#TRAINING = ECLSK_1000_noNA[0:2500,]\n#TESTING = ECLSK_1000_noNA[2501:3061,]\n\nTRAINING = ECLSK_1000_noNA\n\nLONGTREEResults = lrp(method=\"nlme\",\n                             nlme.model=READING~b0i+b1i*(1-exp(-b2*age_5)),\n                             fixedFormula=b0i+b1i+b2~1,\n                             rPartFormula = ~ GENDER + RACE,\n                             group= ~ CHILDID,\n                             randomFormula=b0i+b1i~1,\n                             data=TRAINING,\n                             min.dev=5,\n                             start=c(-2,4,1))\n\nLONGTREEResults$rpart_out\nsummary(LONGTREEResults)\n\nplot(LONGTREEResults$nlmeModel)\n\nlrp2Plot(LONGTREEResults)\nlrpPlot(LONGTREEResults)\nlrpTreePlot(LONGTREEResults)\n#Results\n#> LONGTREEResults$rpart_out\n#n= 3061\n\n#node), split, n, deviance, yval\n#* denotes terminal node\n\n#1) root 3061 2416.4000 1\n#2) RACE=2,3 830  737.8161 1 *\n#  3) RACE=1,4 2231 1634.2750 1\n#  6) GENDER< 0.5 1120  699.0023 1 *\n#  7) GENDER>=0.5 1111  904.1908 1 *\n#  > 2416.4 - (737.8161+1634.275)\n#[1] 44.3089\n#> 1634.275-(699.0023+904.1908)\n#[1] 31.0819\n\n\nLONGTREEResults2 = lrp2function(method=\"nlme\",\n                             nlme.model=READING~b0i+b1i*(1-exp(-b2*age_5)),\n                             fixedFormula=b0i+b1i+b2~1,\n                             rPartFormula = ~ GENDER + RACE,\n                             group= ~ CHILDID,\n                             randomFormula=b0i+b1i~1,\n                             data=TRAINING,\n                             start=c(-2,4,1),\n                             min.dev = 20)\n\nLONGTREEResults2$rpart_out\n\n#> LONGTREEResults2$rpart_out\n#n= 3061\n\n#node), split, n, deviance, yval\n#* denotes terminal node\n\n#1) root 3061 2416.4000 1\n#2) RACE=2,3 830  737.8161 1 *\n#  3) RACE=1,4 2231 1634.2750 1\n#  6) GENDER< 0.5 1120  699.0023 1 *\n#  7) GENDER>=0.5 1111  904.1908 1 *\n\n\nLONGTREEResults3 = lrp2function(method=\"nlme\",\n                                nlme.model=READING~b0i+b1i*(1-exp(-b2*age_5)),\n                                fixedFormula=b0i+b1i+b2~1,\n                                rPartFormula = ~ GENDER + RACE,\n                                group= ~ CHILDID,\n                                randomFormula=b0i+b1i~1,\n                                data=TRAINING,\n                                start=c(-2,4,1),\n                                min.dev = 40)\n\nLONGTREEResults3$rpart_out\n\n#> LONGTREEResults3$rpart_out\n#n= 3061\n\n#node), split, n, deviance, yval\n#* denotes terminal node\n\n#1) root 3061 2416.4000 1\n#2) RACE=2,3 830  737.8161 1 *\n#  3) RACE=1,4 2231 1634.2750 1 *\n\n\n    LONGTREEResults4 = lrp2function(method=\"nlme\",\n                                    nlme.model=READING~b0i+b1i*(1-exp(-b2*age_5)),\n                                    fixedFormula=b0i+b1i+b2~1,\n                                    rPartFormula = ~ GENDER + RACE,\n                                    group= ~ CHILDID,\n                                    randomFormula=b0i+b1i~1,\n                                    data=TRAINING,\n                                    start=c(-2,4,1),\n                                    min.dev = 50)\n\n    LONGTREEResults4$rpart_out\n\n#> LONGTREEResults4$rpart_out\n#n= 4151\n\n#   node), split, n, deviance, yval\n#* denotes terminal node\n\n#1) root 4151 2416.4 1 *\n",
    "created" : 1506532069021.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2264485648",
    "id" : "B4488F14",
    "lastKnownWriteTime" : 1506534879,
    "last_content_update" : 1506534879685,
    "path" : "~/GitHub/longRPart2_scripts/ECLSK trial with GENDER and RACE.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}